# SWE-Agent 云服务 - 用户指南

[English](README.md) | [简体中文](README.zh-CN.md)

## 产品介绍

SWE-Agent 云服务是一个 **AI 驱动的 GitHub 自动化协作平台**，提供云端 SWE-Agent 工作站，让你在任意 Issue 或 PR 评论中输入 `/code` 命令即可触发云端执行。

### 核心特性

- **多模型执行**: 支持 Claude Sonnet 4.5 与 GPT-5 Codex
- **端到端流程**: 需求理解 → 自动编码 → 隔离测试 → 交付 PR
- **透明审计**: 实时成本明细与全链路日志追踪

## 核心功能

### 🤖 AI 自动编码

连接 Claude Sonnet 4.5 与 GPT-5 Codex，结合仓库上下文生成可直接合并的代码补丁。

- 智能理解 Issue 需求和 PR 上下文
- 自动选择最适合的 AI 模型
- 生成符合项目规范的代码

### ✅ 全流程测试

隔离容器执行测试、回归分析与自修复，提交前确保通过度量和断言验收。

- Docker 容器隔离执行环境
- 自动运行项目测试套件
- 测试失败自动重试与修复

### 🚀 自动 PR 工作流

生成结构化 PR 描述、附带日志与成本报告，保持交付透明且可回滚。

- 自动创建或更新 Pull Request
- 包含完整的变更说明和测试结果
- 每个任务的成本和执行时间透明可查

## 定价

SWE-Agent 云服务采用**按量计费**模式，只为真实消耗付费。

### 计费规则

- **模型调用**: 按实际 token 消耗计价
  - Claude Sonnet 4.5: Input $3/M tokens, Output $15/M tokens
  - GPT-5 Codex: 按 OpenAI 官方定价
- **测试任务**: 容器执行时间按秒计费
- **成本透明**: 每个 Issue 生成独立的成本报表与执行日志

### 测试阶段价格

**当前测试阶段优惠**:

| 项目 | 价格 |
|------|------|
| **最低充值** | $10 USD (约 ¥13 CNY) |
| **汇率** | 1 USD = 1.3 CNY (固定) |
| **有效期** | 测试阶段无过期限制 |

> 💡 充值人民币后按固定汇率 1.3 实时折算为美元余额,所有费用以美元结算。

### 典型任务成本估算

| 任务类型 | Context | Output | 预计成本 |
|---------|---------|--------|---------|
| 小型 Bug 修复 | 50k tokens | 2k tokens | ~$0.18 |
| 中型功能开发 | 100k tokens | 5k tokens | ~$0.45 |
| 大型重构 | 200k tokens | 10k tokens | ~$0.90 |

## 如何使用

### 步骤 1: 申请白名单资格

加入测试名单，解锁 swe-agent 自动化开发体验。

**申请方式**:
- 邮箱: `support@stellarlink.co`
- GitHub Issues: [提交申请](https://github.com/swe-agent-bot/swe-agent/issues)

**申请信息**:
请提供以下信息以加快审核：
- GitHub 用户名
- 仓库名称（如果已确定）
- 使用场景描述
- 预期并发任务数

### 步骤 2: 安装 GitHub App

在目标仓库中安装 swe-agent GitHub App，授权 App 访问代码库。

1. 访问 [swe-agent GitHub App](https://github.com/apps/swe-agent-bot)
2. 点击 "Install" 按钮
3. 选择要安装的组织或个人账号
4. 选择要授权的仓库：
   - **All repositories**: 授权所有仓库（推荐）
   - **Only select repositories**: 选择特定仓库
5. 点击 "Install & Authorize"

### 步骤 3: 充值余额

登录 [控制台](https://swe-agent.ai/dashboard)，进行首次充值。

1. 访问控制台并使用 GitHub 账号登录
2. 点击 "Balance" 或 "充值" 按钮
3. 输入充值金额（最低 $10 USD）
4. 使用微信/支付宝扫码支付人民币
5. 支付完成后余额自动更新

### 步骤 4: 开始使用

在任意 Issue 或 PR 评论中输入 `/code` 命令并描述需求。

**命令格式**:

```bash
/code <任务描述>
/code --plan <任务描述>  # 启动计划模式
```

**参数说明**:
- **默认模式**: 直接执行任务，生成代码并提交 PR
- **`--plan` 模式**: 先生成详细的实现计划，等待你确认后再执行
  - 适用于复杂任务或不确定实现方式时
  - AI 会分析需求、列出实现步骤、评估风险
  - 你可以在计划中提出修改建议，再执行

**示例**:

1. **修复 Bug**（直接执行）:
   ```bash
   /code 修复登录页面的按钮样式问题，确保在移动端正常显示
   ```

2. **添加功能**（计划模式）:
   ```bash
   /code --plan 为用户表添加 email 验证功能，包括发送验证邮件和验证逻辑
   ```
   > 使用 `--plan` 适合复杂功能，AI 会先列出实现方案供你审阅

3. **代码重构**（计划模式）:
   ```bash
   /code --plan 将 UserService 中的认证逻辑提取为独立的 AuthService
   ```
   > 重构任务建议先看计划，避免破坏现有功能

4. **更新文档**（直接执行）:
   ```bash
   /code 更新 README，添加新的 API 端点文档
   ```

### 执行流程

提交 `/code` 命令后，SWE-Agent 将自动执行以下流程：

1. **任务接收**: 验证权限并创建任务
2. **上下文收集**: 读取 Issue/PR 内容、代码库结构、相关文件
3. **AI 生成代码**: 调用 AI 模型生成代码变更
4. **测试验证**: 在隔离容器中运行测试
5. **提交 PR**: 创建或更新 Pull Request
6. **结果通知**: 在原 Issue/PR 下评论任务结果和成本

整个流程通常需要 2-10 分钟，具体取决于任务复杂度。

### 查看任务进度

你可以通过以下方式查看任务执行进度：

1. **GitHub 评论**: SWE-Agent 会在原 Issue/PR 下持续更新进度评论
2. **控制台**: 登录控制台查看所有任务的实时状态
3. **邮件通知**: 任务完成后会发送邮件通知（可选）

## 常见问题

### 余额相关

**Q: 如何查看我的余额？**
A: 登录控制台即可在页面顶部看到当前余额。

**Q: 余额不足会怎样？**
A: 余额低于 $10 时将无法执行新任务，需要先充值。

**Q: 充值后多久到账？**
A: 支付成功后实时到账，通常在 10 秒内。

**Q: 任务失败会扣费吗？**
A: 任务失败会扣除已消耗的 API 成本（如果有），但会退还预授权冻结金额。

### 权限相关

**Q: 为什么我提交 /code 没有反应？**
A: 可能的原因：
1. 你的 GitHub 账号不在白名单中
2. 你没有该仓库的协作者权限
3. GitHub App 未正确安装到该仓库

**Q: 如何添加团队成员到白名单？**
A: 联系管理员通过邮件 support@stellarlink.co 申请添加。

### 使用相关

**Q: 可以同时执行多个任务吗？**
A: 可以，支持多 Issue 并发处理。但需确保余额充足（每个任务会预授权 $10）。

**Q: 如何取消正在执行的任务？**
A: 目前不支持中途取消，但可以在控制台查看任务状态。如需强制停止，请联系支持团队。

**Q: AI 生成的代码质量如何保证？**
A:
- 所有代码都会经过测试验证
- 生成 PR 后需要人工 Code Review
- 支持通过 `/code` 继续迭代优化

**Q: 支持哪些编程语言？**
A: 支持所有主流编程语言，包括但不限于：
- JavaScript/TypeScript
- Python
- Go
- Java
- Rust
- PHP
- Ruby

### 故障排查

**Q: 任务一直卡在 "执行中" 状态怎么办？**
A: 任务超时时间为 30 分钟，超时会自动失败。如遇问题，请联系支持团队并提供任务 ID。

**Q: PR 创建失败怎么办？**
A: 检查以下项：
- GitHub App 是否有足够的权限
- 目标分支是否存在
- 是否有冲突的 PR

## 最佳实践

### 1. 任务描述清晰具体

❌ **不好的示例**:
```
/code 优化代码
```

✅ **好的示例**:
```
/code 优化 UserController 的查询性能，使用索引减少数据库查询时间
```

### 2. 拆分大型任务

对于复杂功能，建议拆分为多个小任务，逐步完成。

❌ **不好的示例**:
```
/code 重构整个认证系统，包括登录、注册、密码重置、OAuth 集成
```

✅ **好的示例**:
```
/code 将认证逻辑从 UserController 提取为独立的 AuthService
```
然后再提交后续任务。

### 3. 提供上下文信息

如果任务涉及特定的设计模式或依赖库，在描述中说明。

✅ **好的示例**:
```
/code 使用 bcrypt 为用户密码添加哈希加密，替换当前的明文存储
```

### 4. 充分利用 PR 上下文

在已有 PR 的评论中使用 `/code`，AI 会自动更新该 PR，避免创建重复分支。

### 5. 合理使用计划模式

**何时使用 `--plan`**:
- ✅ 复杂功能开发（涉及多个文件或模块）
- ✅ 代码重构（需要评估影响范围）
- ✅ 不确定实现方式时（想先看方案）
- ✅ 关键系统改动（需要仔细审查）

**何时直接执行**:
- ✅ 简单 Bug 修复
- ✅ 文档更新
- ✅ 配置文件调整
- ✅ 小范围样式修改

**示例对比**:

```bash
# 简单任务 - 直接执行
/code 修复按钮点击无响应的问题

# 复杂任务 - 使用计划模式
/code --plan 重构用户认证流程，支持多因素认证（MFA）
```

## 支持与反馈

### 联系方式

- **邮箱**: support@stellarlink.co
- **GitHub Issues**: [提交问题](https://github.com/swe-agent-bot/swe-agent/issues)
- **文档**: [在线文档](https://github.com/swe-agent-bot/swe-agent/blob/main/README.md)

### 反馈渠道

我们欢迎你的反馈与建议：
- 功能建议: 在 GitHub Issues 创建 Feature Request
- Bug 报告: 在 GitHub Issues 创建 Bug Report
- 使用问题: 发送邮件到 support@stellarlink.co

---

<div align="center">

**开始使用 SWE-Agent 云服务，让 AI 成为你的编程助手！**

[访问控制台](https://swe-agent.ai/dashboard) | [查看演示](https://github.com/cexll/myclaude/issues/17)

</div>
